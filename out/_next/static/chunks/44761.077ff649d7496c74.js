"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44761],{44761:function(e,t,r){r.d(t,{fetchProofsForClaimer:function(){return k}});var n=r(71548),i=r(14520),a=r(47456),s=r(70777),l=r(39347);class o{getHexRoot(){return(0,i.dg)(this.getRoot())}getHexProof(e,t){return this.getProof(e,t).map(e=>(0,i.dg)(e.data))}createHashes(e){for(this.layers=[e];e.length>1;){let t=this.layers.length;this.layers.push([]);let r=e.length;for(let n=0;n<e.length;n+=2){if(n>=r){this.layers[t].push(...e.slice(r));break}if(n+1===e.length&&e.length%2==1){this.layers[t].push(e[n]);continue}let i=e[n],a=n+1===e.length?i:e[n+1],o=[i,a];o.sort(l.KT);let c=(0,s.w)((0,l.Hv)(o),"bytes");this.layers[t].push(c)}e=this.layers[t]}}getRoot(){return 0===this.layers.length?new Uint8Array:this.layers[this.layers.length-1][0]||new Uint8Array}getProof(e,t){if(void 0===e)throw Error("leaf is required");e=e instanceof Uint8Array?e:(0,a.nr)(e);let r=[];if(!Number.isInteger(t)){t=-1;for(let r=0;r<this.leaves.length;r++)(0,l.AY)(e,this.leaves[r])&&(t=r)}if(t<=-1)return[];for(let e=0;e<this.layers.length;e++){let n=this.layers[e],i=t%2,a=i?t-1:t+1;a<n.length&&r.push({position:i?"left":"right",data:n[a]}),t=t/2|0}return r}constructor(e){Object.defineProperty(this,"leaves",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"layers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.leaves=e.map(e=>e instanceof Uint8Array?e:(0,a.nr)(e)),this.leaves=this.leaves.sort(l.KT),this.createHashes(this.leaves)}}var c=r(57293),h=r(92525),u=r(45890);function d(e){let{quantity:t,tokenDecimals:r}=e;return"unlimited"===t?h.zL:(0,u.toUnits)(t,r)}var f=r(45581),y=r(44898),g=r(14433),m=r(3556),w=r(89507),b=r(15578),p=r(97676);async function v(e){let t=e.entry.currencyAddress||n.je,i=await (async()=>{if((0,n.qw)(t)||t===n.je)return 18;let[{getContract:i},{decimals:a}]=await Promise.all([Promise.resolve().then(r.bind(r,47275)),Promise.resolve().then(r.bind(r,10016))]),s=i({address:t,chain:e.chain,client:e.client});return await a({contract:s})})();return(0,s.w)(function(e,t){if(e.length!==t.length)throw new f.fs({expectedLength:e.length,givenLength:t.length});let r=[];for(let n=0;n<e.length;n++){let i=e[n],a=t[n];r.push(function e(t,r){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("address"===t){if(!(0,g.U)(r))throw new y.b({address:r});return(0,w.vk)(r.toLowerCase(),{size:n?32:null})}if("string"===t)return(0,b.$G)(r);if("bytes"===t)return r;if("bool"===t)return(0,w.vk)((0,b.C4)(r),{size:n?32:1});let i=t.match(p.lh);if(i){let[e,t,a="256"]=i,s=Number.parseInt(a)/8;return(0,b.eC)(r,{size:n?32:s,signed:"int"===t})}let a=t.match(p.eL);if(a){let[e,t]=a;if(Number.parseInt(t)!==(r.length-2)/2)throw new f.KY({expectedSize:Number.parseInt(t),givenSize:(r.length-2)/2});return(0,w.vk)(r,{dir:"right",size:n?32:null})}let s=t.match(p.Ow);if(s&&Array.isArray(r)){let[t,n]=s,i=[];for(let t=0;t<r.length;t++)i.push(e(n,r[t],!0));return 0===i.length?"0x":(0,m.SM)(i)}throw new f.Mi(t)}(i,a))}return(0,m.SM)(r)}(["address","uint256","uint256","address"],[e.entry.address,d({quantity:e.entry.maxClaimable||"unlimited",tokenDecimals:e.tokenDecimals}),d({quantity:e.entry.price||"unlimited",tokenDecimals:i}),t]))}async function k(e){let t;let{contract:i,merkleTreeUri:a,claimer:s}=e,l=e.hashEntry||v,h=await (0,c.download)({client:i.client,uri:a}),u=await h.json(),f=s.slice(2,2+u.shardNybbles).toLowerCase(),y=u.baseUri.endsWith("/")?u.baseUri:"".concat(u.baseUri,"/");try{let e="".concat(y).concat(f,".json"),r=await (0,c.download)({client:i.client,uri:e});t=await r.json()}catch(e){return null}let g=new o(await Promise.all(t.entries.map(async t=>l({entry:t,chain:i.chain,client:i.client,tokenDecimals:e.tokenDecimals})))),m=t.entries.find(e=>e.address.toLowerCase()===s.toLowerCase());if(!m)return null;let w=g.getHexProof(await l({entry:m,chain:i.chain,client:i.client,tokenDecimals:e.tokenDecimals})).concat(t.proofs),b=m.currencyAddress||n.r_,p=await (async()=>{if((0,n.qw)(b)||b===n.r_)return 18;let[{getContract:e},{decimals:t}]=await Promise.all([Promise.resolve().then(r.bind(r,47275)),Promise.resolve().then(r.bind(r,10016))]),a=e({address:b,chain:i.chain,client:i.client});return await t({contract:a})})();return{proof:w,quantityLimitPerWallet:d({quantity:m.maxClaimable||"unlimited",tokenDecimals:e.tokenDecimals}),pricePerToken:d({quantity:m.price||"unlimited",tokenDecimals:p}),currency:b}}}}]);