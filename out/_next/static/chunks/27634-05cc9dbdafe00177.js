"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27634,10016,40645],{30241:function(e,t,n){n.d(t,{u:function(){return l}});var o=n(97142),i=n(94293);let r=[],s=[{type:"string"}];async function a(e){return(0,i.readContract)({contract:e.contract,method:["0x06fdde03",r,s],params:[]})}async function l(e){return(0,o.D)(()=>a(e),{cacheKey:"".concat(e.contract.chain.id,":").concat(e.contract.address,":name"),cacheTime:Number.POSITIVE_INFINITY})}},79458:function(e,t,n){n.d(t,{N:function(){return l}});var o=n(97142),i=n(94293);let r=[],s=[{type:"string"}];async function a(e){return(0,i.readContract)({contract:e.contract,method:["0x95d89b41",r,s],params:[]})}async function l(e){return(0,o.D)(()=>a(e),{cacheKey:"".concat(e.contract.chain.id,":").concat(e.contract.address,":symbol"),cacheTime:Number.POSITIVE_INFINITY})}},73294:function(e,t,n){n.d(t,{o0:function(){return l},uH:function(){return c}});var o=n(94293),i=n(13363);let r="0x313ce567",s=[],a=[{type:"uint8"}];function l(e){return(0,i.E)({availableSelectors:e,method:[r,s,a]})}async function c(e){return(0,o.readContract)({contract:e.contract,method:[r,s,a],params:[]})}},10016:function(e,t,n){n.r(t),n.d(t,{decimals:function(){return r},isDecimalsSupported:function(){return i.o0}});var o=n(97142),i=n(73294);async function r(e){return(0,o.D)(()=>(0,i.uH)(e),{cacheKey:"".concat(e.contract.chain.id,":").concat(e.contract.address,":decimals"),cacheTime:Number.POSITIVE_INFINITY})}},40645:function(e,t,n){n.d(t,{getCurrencyMetadata:function(){return a}});var o=n(71548),i=n(30241),r=n(79458),s=n(73294);async function a(e){if((0,o.qw)(e.contract.address))return{name:"Ether",symbol:"ETH",decimals:18,...e.contract.chain.nativeCurrency};try{let[t,n,o]=await Promise.all([(0,i.u)(e).catch(()=>""),(0,r.N)(e),(0,s.uH)(e)]);return{name:t,symbol:n,decimals:o}}catch(e){throw Error("Invalid currency token")}}},27634:function(e,t,n){n.r(t),n.d(t,{default:function(){return e5}});var o=n(3827),i=n(62177),r=n(47082),s=n(64090),a=n(52632),l=n(71548),c=n(83286);function d(e){let t=e.toToken.chainId===e.onRampToken.token.chainId,n=(0,c.Kn)(e.toToken.tokenAddress)===(0,c.Kn)(e.onRampToken.token.tokenAddress);return!(t&&n)}var u=n(63621),x=n(72568),h=n(17440),m=n(73667),y=n(98620),p=n(23565),f=n(43051);async function v(e){try{let t=(0,p.NX)(e.client),n=await t((0,f.EW)(),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({toAddress:e.toAddress,fromCurrencySymbol:e.fromCurrencySymbol,toChainId:e.toChainId.toString(),toTokenAddress:e.toTokenAddress,fromAmount:e.fromAmount,toAmount:e.toAmount,maxSlippageBPS:e.maxSlippageBPS,isTestMode:e.isTestMode,purchaseData:e.purchaseData,fromAddress:e.fromAddress,toGasAmountWei:e.toGasAmountWei,preferredProvider:e.preferredProvider})});if(!n.ok){let e=await n.json();if(e&&"error"in e)throw e;throw Error("HTTP error! status: ".concat(n.status))}return(await n.json()).result}catch(e){throw console.error("Error getting buy with fiat quote",e),e}}var j=n(47013),g=n(10194),C=n(48762),w=n(52731),b=n(94071),k=n(972),T=n(53326),A=n(96088),S=n(31137),E=n(3702),L=n(32788),W=n(49580),B=n(78319),I=n(93336),z=n(326),M=n(17540),O=n(92959),F=n(93610),R=n(47275),q=n(10016),D=n(45890),N=n(4966),_=n(51102),P=n(26311),H=n(37228),U=n(73334),K=n(13842),V=n(39724),G=n(95707);function Q(e){var t,n,i,r,s,d;let{payUiOptions:h,supportedDestinations:y,client:p,onContinue:f,payerAccount:v}=e,j=(0,N.useCustomTheme)(),g=(0,P.r)(),w=h.metadata,b=h.paymentInfo,{data:T}=(0,_.SG)(b.chain),{data:A}=(0,H.F6)({client:p,address:b.sellerAddress}),W=(0,m.useQuery)({queryKey:["amount",b],queryFn:async()=>{let e=18;return b.token&&!(0,F.M)(b.token)&&(e=await (0,q.decimals)({contract:(0,R.getContract)({address:b.token.address,chain:b.chain,client:p})})),"amountWei"in b?(0,D.bb)(b.amountWei,e):b.amount}}).data;if(!T||void 0===W)return(0,o.jsx)(C.a,{});let I=b.token?{...b.token,icon:(null===(t=b.token)||void 0===t?void 0:t.icon)||(null===(i=y.find(e=>e.chain.id===b.chain.id))||void 0===i?void 0:null===(n=i.tokens.find(e=>{var t;return e.address.toLowerCase()===(null===(t=b.token)||void 0===t?void 0:t.address.toLowerCase())}))||void 0===n?void 0:n.icon)}:{address:l.K8,name:T.nativeCurrency.name,symbol:T.nativeCurrency.symbol,icon:null===(r=T.icon)||void 0===r?void 0:r.url};return(0,o.jsxs)(S.Container,{p:"lg",children:[(0,o.jsx)(S.ModalHeader,{title:(null==w?void 0:w.name)||"Payment Details"}),(0,o.jsx)(k.L,{y:"lg"}),(0,o.jsxs)(S.Container,{children:[(null==w?void 0:w.image)?(0,o.jsx)(K.Img,{client:p,src:null==w?void 0:w.image,style:{width:"100%",borderRadius:x.W0.md,backgroundColor:j.colors.tertiaryBg}}):g?(0,o.jsxs)(S.Container,{flex:"row",center:"both",style:{padding:x.W0.md,marginBottom:x.W0.md,borderRadius:x.W0.md,backgroundColor:j.colors.tertiaryBg},children:[(0,o.jsx)(G.WalletImage,{size:x.EA.xl,id:g.id,client:p}),(0,o.jsx)("div",{style:{flexGrow:1,borderBottom:"6px dotted",borderColor:j.colors.secondaryIconColor,marginLeft:x.W0.md,marginRight:x.W0.md}}),(0,o.jsx)(U.f,{client:p,size:x.EA.xl,chainIconUrl:null===(s=T.icon)||void 0===s?void 0:s.url})]}):null,(0,o.jsx)(k.L,{y:"md"}),(0,o.jsxs)(S.Container,{flex:"row",children:[(0,o.jsx)(S.Container,{flex:"column",expand:!0,children:(0,o.jsx)(L.Text,{size:"md",color:"primaryText",weight:700,children:"Price"})}),(0,o.jsx)(S.Container,{expand:!0,children:(0,o.jsxs)(S.Container,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"right"},children:[(0,o.jsx)(V.TokenIcon,{chain:b.chain,client:e.client,size:"sm",token:I}),(0,o.jsxs)(L.Text,{color:"primaryText",size:"md",weight:700,children:[String((0,u.u)(Number(W),6))," ",I.symbol]})]})})]}),(0,o.jsx)(k.L,{y:"md"}),(0,o.jsx)(S.Line,{}),(0,o.jsx)(k.L,{y:"md"}),(0,o.jsxs)(S.Container,{flex:"row",children:[(0,o.jsx)(S.Container,{flex:"column",expand:!0,children:(0,o.jsx)(L.Text,{size:"xs",color:"secondaryText",children:"Network"})}),(0,o.jsx)(S.Container,{expand:!0,children:(0,o.jsxs)(S.Container,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"right"},children:[(0,o.jsx)(U.f,{chainIconUrl:null===(d=T.icon)||void 0===d?void 0:d.url,size:"xs",client:e.client}),(0,o.jsx)(L.Text,{size:"xs",color:"secondaryText",style:{textAlign:"right"},children:T.name})]})})]}),(0,o.jsx)(k.L,{y:"sm"}),(0,o.jsxs)(S.Container,{flex:"row",children:[(0,o.jsx)(S.Container,{flex:"column",expand:!0,children:(0,o.jsx)(L.Text,{size:"xs",color:"secondaryText",children:"Seller"})}),(0,o.jsx)(S.Container,{expand:!0,children:(0,o.jsx)(S.Container,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"right"},children:(0,o.jsx)(L.Text,{size:"xs",color:"secondaryText",style:{textAlign:"right"},children:A||(0,c.Xn)(b.sellerAddress)})})})]})]}),(0,o.jsx)(k.L,{y:"xl"}),v?(0,o.jsx)(E.Button,{variant:"accent",fullWidth:!0,onClick:()=>{(0,a.V)({event:"choose_payment_method_direct_payment_mode",client:p,walletAddress:v.address,walletType:null==g?void 0:g.id}),f(W,b.chain,I)},children:"Choose Payment Method"}):(0,o.jsx)("div",{children:(0,o.jsx)(B.ConnectButton,{...e.connectOptions,client:p,theme:j,connectButton:{style:{width:"100%"}}})})]})}var Y=n(82161),J=n(68982);function X(e){let{estimatedSeconds:t,quoteIsLoading:n}=e;return(0,o.jsxs)(S.Container,{bg:"tertiaryBg",flex:"row",borderColor:"borderColor",style:{borderRadius:x.q0.md,borderTopLeftRadius:0,borderTopRightRadius:0,justifyContent:"space-between",alignItems:"center",borderWidth:"1px",borderStyle:"solid"},children:[(0,o.jsxs)(S.Container,{flex:"row",center:"y",gap:"xxs",color:"accentText",p:"sm",children:[(0,o.jsx)(i.T39,{width:x.EA.sm,height:x.EA.sm}),n?(0,o.jsx)(Y.Skeleton,{height:x.JB.xs,width:"50px",color:"borderColor"}):(0,o.jsx)(L.Text,{size:"xs",color:"secondaryText",children:void 0!==t?"~".concat((0,J.Z)(t)):"--"})]}),(0,o.jsxs)(E.Button,{variant:"ghost",onClick:e.onViewFees,gap:"xs",children:[(0,o.jsx)(S.Container,{color:"accentText",flex:"row",center:"both",children:(0,o.jsx)(Z,{size:x.EA.sm})}),(0,o.jsx)(L.Text,{size:"xs",color:"secondaryText",children:"View Fees"})]})]})}let Z=e=>(0,o.jsxs)("svg",{width:e.size,height:e.size,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[(0,o.jsx)("path",{d:"M9.5 1.5H2.5C1.94772 1.5 1.5 1.94772 1.5 2.5V9.5C1.5 10.0523 1.94772 10.5 2.5 10.5H9.5C10.0523 10.5 10.5 10.0523 10.5 9.5V2.5C10.5 1.94772 10.0523 1.5 9.5 1.5Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M4.5 7.5L7.5 4.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]});var $=n(58385),ee=n(25402);function et(e){return(0,o.jsxs)(S.Container,{bg:"tertiaryBg",borderColor:"borderColor",flex:"row",style:{borderRadius:x.q0.md,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderWidth:"1px",borderStyle:"solid",borderBottom:"none",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)(en,{variant:"ghost",onClick:e.onSelectCurrency,style:{minHeight:"64px",justifyContent:"flex-start",minWidth:"50%"},gap:"sm",children:[(0,o.jsx)(e.currency.icon,{size:x.EA.md}),(0,o.jsxs)(S.Container,{flex:"row",center:"y",gap:"xxs",color:"secondaryText",children:[(0,o.jsx)(L.Text,{color:"primaryText",children:e.currency.shorthand}),(0,o.jsx)(i.v4q,{width:x.EA.sm,height:x.EA.sm})]})]}),(0,o.jsx)("div",{style:{flexGrow:1,flexShrink:1,display:"flex",flexDirection:"column",alignItems:"flex-end",gap:x.W0.xxs,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",justifyContent:"center",paddingRight:x.W0.sm},children:e.isLoading?(0,o.jsx)(Y.Skeleton,{width:"100px",height:x.JB.lg}):(0,o.jsx)(L.Text,{size:"lg",color:e.value?"primaryText":"secondaryText",children:e.value?"".concat((0,u.u)(Number(e.value),6)):"--"})})]})}let en=(0,ee.Z)(E.Button)(()=>({"&[disabled]:hover":{borderColor:"transparent"}}));var eo=n(85738),ei=n(40645),er=n(27180),es=n(80695),ea=n(10080),el=n(94646),ec=n(73303);async function ed(e,t){try{let n=await (0,ea.N)({transaction:e,from:t}),o=n.wei/10n;return n.wei+o}catch(n){if(t)return await ed(e);return 2000000n*await (0,er.o)({client:e.client,chain:e.chain})}}function eu(e){var t,n;let{payUiOptions:i,client:r,payerAccount:c,supportedDestinations:d,onContinue:h}=e,{data:y}=(0,_.SG)(i.transaction.chain),p=i.metadata,{data:f}=function(e){let{transaction:t,account:n,supportedDestinations:o}=e,[i,r]=(0,s.useState)();return(0,s.useEffect)(()=>{Promise.all([(0,el.q)(t.value),(0,el.q)(t.erc20Value),(0,el.q)(t.to),(0,es.encode)(t)]).then(e=>{var t;let[n,o,i,s]=e;r({value:null==n?void 0:n.toString(),erc20Value:null==o?void 0:null===(t=o.amountWei)||void 0===t?void 0:t.toString(),erc20Currency:null==o?void 0:o.tokenAddress,to:i,data:s})})},[t]),(0,m.useQuery)({queryKey:["transaction-cost",t.chain.id,null==n?void 0:n.address,i],queryFn:async()=>{var e,i,r;if(!n)throw Error("No account");let s=await (0,el.q)(t.erc20Value);if(s){let[e,a,l]=await Promise.all([(0,ec.p)({address:n.address,chain:t.chain,client:t.client,tokenAddress:s.tokenAddress}),(0,ei.getCurrencyMetadata)({contract:(0,R.getContract)({address:s.tokenAddress,chain:t.chain,client:t.client})}),ed(t,null==n?void 0:n.address)]),c=s.amountWei;return{token:{address:s.tokenAddress,name:a.name,symbol:a.symbol,icon:null===(r=o.find(e=>e.chain.id===t.chain.id))||void 0===r?void 0:null===(i=r.tokens.find(e=>e.address.toLowerCase()===s.tokenAddress.toLowerCase()))||void 0===i?void 0:i.icon},decimals:a.decimals,walletBalance:e,gasCostWei:l,transactionValueWei:c}}let[a,c,d]=await Promise.all([(0,ec.p)({address:n.address,chain:t.chain,client:t.client}),(0,eo.ZN)(t.chain),ed(t,null==n?void 0:n.address)]),u=await (0,el.q)(t.value)||0n;return{token:{address:l.K8,name:c.nativeCurrency.name,symbol:c.nativeCurrency.symbol,icon:null===(e=c.icon)||void 0===e?void 0:e.url},decimals:18,walletBalance:a,gasCostWei:d,transactionValueWei:u}},enabled:!!t&&!!n&&!!i,refetchInterval:()=>{if(!t.erc20Value)return 3e4}})}({transaction:i.transaction,account:c,supportedDestinations:d}),v=(0,N.useCustomTheme)(),j=(0,P.r)(),g=(0,H.GS)(j);return f&&y?(0,o.jsxs)(S.Container,{p:"lg",children:[(0,o.jsx)(S.ModalHeader,{title:(null==p?void 0:p.name)||"Transaction"}),(0,o.jsx)(k.L,{y:"lg"}),(0,o.jsxs)(S.Container,{children:[(null==p?void 0:p.image)?(0,o.jsx)(K.Img,{client:r,src:null==p?void 0:p.image,style:{width:"100%",borderRadius:x.W0.md,backgroundColor:v.colors.tertiaryBg}}):j?(0,o.jsxs)(S.Container,{flex:"row",center:"both",style:{padding:x.W0.md,marginBottom:x.W0.md,borderRadius:x.W0.md,backgroundColor:v.colors.tertiaryBg},children:[(0,o.jsx)(G.WalletImage,{size:x.EA.xl,id:j.id,client:r}),(0,o.jsx)("div",{style:{flexGrow:1,borderBottom:"6px dotted",borderColor:v.colors.secondaryIconColor,marginLeft:x.W0.md,marginRight:x.W0.md}}),(0,o.jsx)(U.f,{client:r,size:x.EA.xl,chainIconUrl:null===(t=y.icon)||void 0===t?void 0:t.url})]}):null,(0,o.jsx)(k.L,{y:"md"}),(0,o.jsxs)(S.Container,{flex:"row",children:[(0,o.jsx)(S.Container,{flex:"column",expand:!0,children:(0,o.jsx)(L.Text,{size:"md",color:"primaryText",weight:700,children:"Price"})}),(0,o.jsx)(S.Container,{expand:!0,children:(0,o.jsxs)(S.Container,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"right"},children:[(0,o.jsx)(V.TokenIcon,{chain:i.transaction.chain,client:e.client,size:"sm",token:f.token}),(0,o.jsxs)(L.Text,{color:"primaryText",size:"md",weight:700,children:[String((0,u.u)(Number((0,D.bb)(f.transactionValueWei,f.decimals)),6))," ",f.token.symbol]})]})})]}),(0,o.jsx)(k.L,{y:"md"}),(0,o.jsx)(S.Line,{}),(0,o.jsx)(k.L,{y:"md"}),(0,o.jsxs)(S.Container,{flex:"row",children:[(0,o.jsx)(S.Container,{flex:"column",expand:!0,children:(0,o.jsx)(L.Text,{size:"xs",color:"secondaryText",children:"Gas Fees"})}),(0,o.jsx)(S.Container,{expand:!0,children:(0,o.jsx)(S.Container,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"right"},children:(0,o.jsx)(L.Text,{color:g?"success":"primaryText",size:"xs",children:g?"Sponsored":"".concat(String((0,u.u)(Number((0,D.bb)(f.gasCostWei,y.nativeCurrency.decimals)),6))," ").concat(y.nativeCurrency.symbol)})})})]}),(0,o.jsx)(k.L,{y:"sm"}),(0,o.jsxs)(S.Container,{flex:"row",children:[(0,o.jsx)(S.Container,{flex:"column",expand:!0,children:(0,o.jsx)(L.Text,{size:"xs",color:"secondaryText",children:"Network"})}),(0,o.jsx)(S.Container,{expand:!0,children:(0,o.jsxs)(S.Container,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"right"},children:[(0,o.jsx)(U.f,{chainIconUrl:null===(n=y.icon)||void 0===n?void 0:n.url,size:"xs",client:e.client}),(0,o.jsx)(L.Text,{size:"xs",color:"secondaryText",style:{textAlign:"right"},children:y.name})]})})]})]}),(0,o.jsx)(k.L,{y:"xl"}),c?(0,o.jsx)(E.Button,{variant:"accent",fullWidth:!0,onClick:()=>{let e=f.transactionValueWei;f.token.address!==l.K8||g||(e+=f.gasCostWei),(0,a.V)({event:"choose_payment_method_transaction_mode",client:r,walletAddress:c.address,walletType:null==j?void 0:j.id}),h((0,D.bb)(e,f.decimals),i.transaction.chain,f.token)},children:"Choose Payment Method"}):(0,o.jsx)("div",{children:(0,o.jsx)(B.ConnectButton,{...e.connectOptions,client:r,theme:v,connectButton:{style:{width:"100%"}}})})]}):(0,o.jsx)(C.a,{})}var ex=n(43189);function eh(e){let t=(0,N.useCustomTheme)();return(0,o.jsx)(S.Container,{bg:"tertiaryBg",style:{borderRadius:x.q0.lg,border:"1px solid ".concat(t.colors.borderColor),...e.containerStyle},children:(0,o.jsxs)(E.Button,{fullWidth:!0,disabled:e.disabled,onClick:e.onClick,variant:"ghost",style:{justifyContent:"space-between",padding:x.W0.sm,backgroundColor:t.colors.tertiaryBg},gap:"sm",children:[(0,o.jsx)(em,{client:e.client,address:e.address}),!e.disableChevron&&(0,o.jsx)(i.v4q,{width:x.EA.sm,height:x.EA.sm,style:{color:t.colors.secondaryText}}),e.checked&&(0,o.jsx)(i.nQG,{width:x.EA.md,height:x.EA.md})]})})}function em(e){let{client:t,address:n}=e,i=(0,ex.f)().find(t=>{var n;return(null===(n=t.getAccount())||void 0===n?void 0:n.address)===e.address}),r=e.walletId||(null==i?void 0:i.id),s=(0,H.F6)({client:t,address:n}),a=s.data||(0,c.Xn)(n),l=(0,H.c9)({client:t,ensName:s.data});return(0,o.jsxs)(S.Container,{flex:"row",center:"y",gap:"sm",color:"secondaryText",children:[l.data?(0,o.jsx)(K.Img,{src:l.data,width:x.EA.md,height:x.EA.md,style:{borderRadius:x.q0.sm},client:e.client}):r?(0,o.jsx)(G.WalletImage,{id:r,size:x.EA.md,client:e.client}):null,(0,o.jsx)(L.Text,{size:"sm",color:"primaryText",children:a||(0,c.Xn)(e.address)})]})}var ey=n(39531);function ep(e){return(0,o.jsxs)(S.Container,{children:[(0,o.jsx)(S.Container,{p:"lg",children:(0,o.jsx)(S.ModalHeader,{title:"Pay with",onBack:e.onBack})}),(0,o.jsx)(S.Line,{}),(0,o.jsx)(k.L,{y:"lg"}),(0,o.jsx)(S.Container,{flex:"column",gap:"xs",px:"lg",children:ey.QT.map(t=>(0,o.jsxs)(ef,{fullWidth:!0,variant:"secondary",onClick:()=>e.onSelect(t),gap:"sm",children:[(0,o.jsx)(t.icon,{size:x.EA.lg}),(0,o.jsxs)(S.Container,{flex:"column",gap:"xxs",children:[(0,o.jsx)(L.Text,{color:"primaryText",children:t.shorthand}),(0,o.jsx)(L.Text,{size:"sm",children:t.name})]})]},t.shorthand))}),(0,o.jsx)(k.L,{y:"lg"})]})}let ef=(0,ee.Z)(E.Button)(()=>{let e=(0,N.useCustomTheme)();return{background:e.colors.tertiaryBg,justifyContent:"flex-start",gap:x.W0.sm,padding:x.W0.sm,"&:hover":{background:e.colors.secondaryButtonBg,transform:"scale(1.01)"},transition:"background 200ms ease, transform 150ms ease"}});var ev=n(28084);function ej(e,t){let n=(window.innerHeight-750)/2,o=(window.innerWidth-500)/2;return window.open("".concat(e,"&theme=").concat(t),"thirdweb Pay","width=".concat(500,", height=").concat(750,", top=").concat(n,", left=").concat(o))}var eg=n(79048),eC=n(15497),ew=n(24134),eb=n(35149),ek=n(37697),eT=n(27580),eA=n(11832);function eS(e){var t,n,i,a;let l=(0,r.useQueryClient)(),{openedWindow:c,onSuccess:d}=e,u=(0,ew.s)({intentId:e.intentId,client:e.client}),x="loading";(null===(t=u.data)||void 0===t?void 0:t.status)==="ON_RAMP_TRANSFER_FAILED"||(null===(n=u.data)||void 0===n?void 0:n.status)==="PAYMENT_FAILED"?x="failed":(null===(i=u.data)||void 0===i?void 0:i.status)==="CRYPTO_SWAP_FALLBACK"?x="partialSuccess":(null===(a=u.data)||void 0===a?void 0:a.status)==="ON_RAMP_TRANSFER_COMPLETED"&&(x="completed");let h=(0,s.useRef)(!1);(0,s.useEffect)(()=>{var e;!h.current&&d&&(null===(e=u.data)||void 0===e?void 0:e.status)==="ON_RAMP_TRANSFER_COMPLETED"&&(h.current=!0,d(u.data))},[d,u.data]),(0,s.useEffect)(()=>{var e,t;c&&u.data&&((null===(e=u.data)||void 0===e?void 0:e.status)==="CRYPTO_SWAP_REQUIRED"||(null===(t=u.data)||void 0===t?void 0:t.status)==="ON_RAMP_TRANSFER_COMPLETED")&&c.close()},[u.data,c]);let m=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{var e;m.current||(null===(e=u.data)||void 0===e?void 0:e.status)!=="ON_RAMP_TRANSFER_COMPLETED"||(m.current=!0,(0,g.K)(l))},[u.data,l]),(0,s.useEffect)(()=>{var t;(null===(t=u.data)||void 0===t?void 0:t.status)==="CRYPTO_SWAP_REQUIRED"&&e.onShowSwapFlow(u.data)},[u.data,e.onShowSwapFlow]),(0,o.jsxs)(S.Container,{p:"lg",children:[(0,o.jsx)(S.ModalHeader,{title:e.title,onBack:e.onBack}),e.hasTwoSteps&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(k.L,{y:"lg"}),(0,o.jsx)(eb.E,{steps:2,currentStep:1}),(0,o.jsx)(k.L,{y:"sm"}),(0,o.jsxs)(L.Text,{size:"xs",children:["Step 1 of 2 - Buying ",e.quote.onRampToken.token.symbol," with"," ",e.quote.fromCurrencyWithFees.currencySymbol]})]}),(0,o.jsx)(eE,{uiStatus:x,onDone:e.onDone,fiatStatus:u.data,client:e.client,transactionMode:e.transactionMode,quote:e.quote,isEmbed:e.isEmbed})]})}function eE(e){let{uiStatus:t}=e,n=e.fiatStatus?(0,eT.B)(e.fiatStatus):void 0,r=e.fiatStatus&&"NOT_FOUND"!==e.fiatStatus.status?e.fiatStatus:void 0,s=e.quote.onRampToken,a=(0,o.jsx)(eA.s,{client:e.client,token:(null==r?void 0:r.source)?{chainId:r.source.token.chainId,address:r.source.token.tokenAddress,symbol:r.source.token.symbol||"",amount:r.source.amount}:{chainId:s.token.chainId,address:s.token.tokenAddress,symbol:s.token.symbol,amount:s.amount},fiat:{amount:e.quote.fromCurrencyWithFees.amount,currencySymbol:e.quote.fromCurrencyWithFees.currencySymbol},statusMeta:(null==r?void 0:r.source)&&n?{color:null==n?void 0:n.color,text:null==n?void 0:n.status,txHash:r.source.transactionHash}:void 0});return(0,o.jsxs)(S.Container,{children:[(0,o.jsx)(k.L,{y:"xl"}),"loading"===t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(k.L,{y:"md"}),(0,o.jsx)(S.Container,{flex:"row",center:"x",children:(0,o.jsx)(T.Spinner,{size:"xxl",color:"accentText"})}),(0,o.jsx)(k.L,{y:"md"}),(0,o.jsx)(L.Text,{color:"primaryText",size:"lg",center:!0,children:"Buy Pending"}),(0,o.jsx)(k.L,{y:"sm"}),!(0,eC.tq)()&&(0,o.jsx)(L.Text,{center:!0,children:"Complete the purchase in popup"}),(0,o.jsx)(k.L,{y:"xxl"}),a]}),"failed"===t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(k.L,{y:"md"}),(0,o.jsx)(S.Container,{flex:"row",center:"x",children:(0,o.jsx)(ek.E,{size:x.EA["3xl"]})}),(0,o.jsx)(k.L,{y:"lg"}),(0,o.jsx)(L.Text,{color:"primaryText",size:"lg",center:!0,children:"Transaction Failed"}),(0,o.jsx)(k.L,{y:"xxl"}),a]}),"completed"===t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(k.L,{y:"md"}),(0,o.jsx)(S.Container,{flex:"row",center:"x",color:"success",children:(0,o.jsx)(i.NhS,{width:x.EA["3xl"],height:x.EA["3xl"]})}),(0,o.jsx)(k.L,{y:"md"}),(0,o.jsx)(L.Text,{color:"primaryText",size:"lg",center:!0,children:"Buy Complete"}),e.fiatStatus&&"NOT_FOUND"!==e.fiatStatus.status&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(k.L,{y:"xxl"}),a,(0,o.jsx)(k.L,{y:"sm"})]}),!e.isEmbed&&(0,o.jsx)(E.Button,{variant:"accent",fullWidth:!0,onClick:e.onDone,children:e.transactionMode?"Continue Transaction":"Done"})]})]})}var eL=n(4718),eW=n(66766);function eB(e){let t=d(e.quote),[n,i]=(0,s.useState)(t?{id:"step-1"}:{id:"onramp-status"}),[r,l]=(0,s.useState)(e.openedWindow),c=(0,s.useCallback)(()=>{(0,ev.w)({intentId:e.quote.intentId,client:e.client}).then(t=>{e.onSuccess(t)})},[e.onSuccess,e.quote.intentId,e.client]);return"step-1"===n.id?(0,o.jsx)(eL.a,{title:e.title,client:e.client,onBack:e.onBack,partialQuote:(0,eL.R)(e.quote),step:1,onContinue:()=>{let t=ej(e.quote.onRampLink,e.theme);(0,a.V)({event:"open_onramp_popup",client:e.client,walletAddress:e.payer.account.address,walletType:e.payer.wallet.id}),(0,eg.h)({type:"fiat",intentId:e.quote.intentId}),l(t),i({id:"onramp-status"})}}):"onramp-status"===n.id?(0,o.jsx)(eS,{title:e.title,client:e.client,intentId:e.quote.intentId,onBack:e.onBack,hasTwoSteps:t,openedWindow:r,quote:e.quote,onDone:e.onDone,onShowSwapFlow:e=>{i({id:"postonramp-swap",data:e})},transactionMode:e.transactionMode,isEmbed:e.isEmbed,onSuccess:e.onSuccess}):"postonramp-swap"===n.id?(0,o.jsx)(eW.S,{title:e.title,status:n.data,quote:(0,eL.R)(e.quote),client:e.client,onBack:e.onBack,onDone:e.onDone,onSwapFlowStarted:()=>{},transactionMode:e.transactionMode,isEmbed:e.isEmbed,payer:e.payer,onSuccess:c}):null}let eI=(0,eo.ax)({id:137,name:"Polygon",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},blockExplorers:[{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.polygonscan.com/api"}]});var ez=n(71313),eM=n(6354),eO=n(96856);function eF(e){var t;let n;let{name:r}=(0,_.zw)(e.chain);return(0,o.jsxs)(S.Container,{children:[(0,o.jsx)("div",{onClick:e=>{var t;null===(t=e.currentTarget.querySelector("input"))||void 0===t||t.focus()},children:(0,o.jsxs)(S.Container,{flex:"row",center:"both",gap:"xs",style:{flexWrap:"nowrap"},children:[(0,o.jsx)(eO.Input,{variant:"outline",pattern:"^[0-9]*[.,]?[0-9]*$",inputMode:"decimal",tabIndex:-1,placeholder:"0",type:"text","data-placeholder":""===e.value,value:e.value||"0",disabled:e.freezeAmount,onClick:t=>{""===e.value&&t.currentTarget.setSelectionRange(t.currentTarget.value.length,t.currentTarget.value.length)},onChange:t=>{let n=t.target.value;n.startsWith(".")&&(n="0".concat(n)),Number.isNaN(Number(n))||(n.startsWith("0")&&!n.startsWith("0.")?e.onChange(n.slice(1)):e.onChange(n))},style:{border:"none",fontSize:(t=e.value).length>10?"26px":t.length>6?"34px":"50px",boxShadow:"none",borderRadius:"0",padding:"0",paddingBlock:"2px",fontWeight:600,textAlign:"right",width:(n=e.value.replace(".","").length,e.value.includes(".")&&(n+=.3),"calc(".concat("".concat(Math.max(1,n),"ch")," + 6px)")),maxWidth:"calc(100% - 100px)"}}),(0,o.jsx)(W.TokenSymbol,{token:e.token,chain:e.chain,size:"lg",color:"secondaryText"})]})}),!e.hideTokenSelector&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(k.L,{y:"sm"}),(0,o.jsx)(S.Container,{flex:"row",center:"x",children:(0,o.jsxs)(eR,{variant:"secondary",fullWidth:!0,style:{fontSize:x.JB.sm},gap:"xxs",onClick:e.onSelectToken,disabled:e.freezeChainAndToken,children:[(0,o.jsxs)(S.Container,{flex:"row",center:"y",gap:"sm",children:[(0,o.jsx)(V.TokenIcon,{token:e.token,chain:e.chain,size:"md",client:e.client}),(0,o.jsxs)(S.Container,{flex:"column",style:{gap:"4px"},children:[(0,o.jsx)(W.TokenSymbol,{token:e.token,chain:e.chain,size:"sm"}),r?(0,o.jsx)(L.Text,{size:"xs",color:"secondaryText",children:r}):(0,o.jsx)(Y.Skeleton,{width:"90px",height:x.JB.xs})]})]}),(0,o.jsx)(i.v4q,{width:x.EA.sm,height:x.EA.sm,style:{marginLeft:"auto"}})]})})]})]})}let eR=(0,ee.Z)(E.Button)(()=>{let e=(0,N.useCustomTheme)();return{background:e.colors.tertiaryBg,border:"1px solid ".concat(e.colors.borderColor),justifyContent:"flex-start",transition:"background 0.3s",padding:x.W0.sm}});function eq(e){return(0,o.jsx)(S.Container,{flex:"column",gap:"xs",style:{alignItems:"flex-start"},children:e.quote.processingFees.map(e=>{let t=(0,u.u)(Number(e.amount),6);return(0,o.jsxs)(S.Container,{flex:"row",gap:"xxs",children:[(0,o.jsxs)(L.Text,{color:"primaryText",size:"sm",children:[0===t?"~":"",t," ",e.token.symbol]}),(0,o.jsxs)(L.Text,{color:"secondaryText",size:"sm",children:["($",(e.amountUSDCents/100).toFixed(2),")"]})]},"".concat(e.token.chainId,"_").concat(e.token.tokenAddress,"_").concat(t))})})}function eD(e){return(0,o.jsxs)(S.Container,{flex:"column",gap:"xs",children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)(L.Text,{inline:!0,color:"secondaryText",children:"Amount"}),(0,o.jsxs)(L.Text,{color:"primaryText",inline:!0,children:[(0,u.u)(Number(e.quote.fromCurrency.amount),2)," ",e.quote.fromCurrency.currencySymbol]})]}),e.quote.processingFees.map((e,t)=>{let n=(0,u.u)(Number(e.amount),6);return(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)(L.Text,{inline:!0,color:"secondaryText",children:"NETWORK"===e.feeType?"Network Fee":"Processing Fee"}),(0,o.jsxs)(L.Text,{color:"primaryText",inline:!0,children:[0===n?"~":"",n," ",e.currencySymbol," "]})]},t)}),(0,o.jsx)(k.L,{y:"xxs"}),(0,o.jsx)(S.Line,{}),(0,o.jsx)(k.L,{y:"xxs"}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)(L.Text,{inline:!0,color:"secondaryText",children:"Total"}),(0,o.jsxs)(L.Text,{color:"primaryText",inline:!0,children:[(0,u.u)(Number(e.quote.fromCurrencyWithFees.amount),6)," ",e.quote.fromCurrencyWithFees.currencySymbol]})]})]})}let eN=e=>(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",width:e.size,height:e.size,role:"presentation",children:(0,o.jsx)("path",{fill:"currentColor",d:"M15.6 4.6H1.85v-.55l12.1-.968v.968h1.65V2.4c0-1.21-.98-2.059-2.177-1.888L2.378 2.089C1.18 2.26.2 3.39.2 4.6v11a2.2 2.2 0 002.2 2.2h13.2a2.2 2.2 0 002.2-2.2V6.8a2.2 2.2 0 00-2.2-2.2zm-1.65 7.707a1.65 1.65 0 01-.63-3.176 1.65 1.65 0 11.63 3.176z"})});var e_=n(45164);function eP(e){let{name:t}=(0,_.zw)(e.chain),n=(0,h.t)({address:e.payerAccount.address,chain:e.chain,tokenAddress:(0,F.M)(e.token)?void 0:e.token.address,client:e.client});return(0,o.jsxs)(S.Container,{bg:"tertiaryBg",borderColor:"borderColor",flex:"row",style:{borderWidth:"1px",borderTopWidth:0,borderStyle:"solid",flexWrap:"nowrap",justifyContent:"space-between",minHeight:"64px",alignItems:"center",...e.swapRequired?{borderBottom:"none"}:{borderBottomLeftRadius:x.q0.md,borderBottomRightRadius:x.q0.md}},children:[(0,o.jsxs)(E.Button,{variant:"ghost",onClick:e.onSelectToken,gap:"sm",style:{paddingInline:x.W0.sm,paddingBlock:x.W0.sm,minWidth:"50%",justifyContent:"flex-start"},disabled:e.freezeChainAndTokenSelection,children:[(0,o.jsx)($.K,{token:e.token,chain:e.chain,size:"md",client:e.client}),(0,o.jsxs)(S.Container,{flex:"column",gap:"3xs",children:[(0,o.jsxs)(S.Container,{flex:"row",gap:"xs",center:"y",color:"primaryText",children:[(0,o.jsx)(W.TokenSymbol,{token:e.token,chain:e.chain,size:"sm"}),(0,o.jsx)(i.v4q,{width:x.EA.sm,height:x.EA.sm})]}),t?(0,o.jsx)(L.Text,{size:"xs",children:t}):(0,o.jsx)(Y.Skeleton,{width:"90px",height:x.JB.xs})]})]}),(0,o.jsxs)("div",{style:{flexGrow:1,flexShrink:1,display:"flex",flexDirection:"column",alignItems:"flex-end",gap:x.W0.xxs,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",justifyContent:"center",paddingRight:x.W0.sm},children:[e.isLoading?(0,o.jsx)(Y.Skeleton,{width:"120px",height:x.JB.md,color:"borderColor"}):(0,o.jsx)(L.Text,{size:"md",color:e.value?"primaryText":"secondaryText",style:{},children:(0,u.u)(Number(e.value),6)||""}),(0,o.jsxs)(S.Container,{flex:"row",gap:"xxs",center:"y",color:"secondaryText",children:[(0,o.jsx)(eN,{size:x.JB.xs}),n.data?(0,o.jsx)(L.Text,{size:"xs",color:"secondaryText",weight:500,children:(0,e_.a)(n.data,!1)}):(0,o.jsx)(Y.Skeleton,{width:"70px",height:x.JB.xs})]})]})]})}var eH=n(10238),eU=n(55605),eK=n(20356),eV=n(74153);async function eG(e){try{let t=(0,p.NX)(e.client),n=await t((0,f.jM)(),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({fromAddress:e.fromAddress,toAddress:e.toAddress,chainId:e.chainId,tokenAddress:e.tokenAddress,amount:e.amount,purchaseData:e.purchaseData})});if(!n.ok){let e=await n.json();if(e&&"error"in e)throw e;throw Error("HTTP error! status: ".concat(n.status))}let o=(await n.json()).result;return{transactionRequest:{chain:(0,eo.XY)(o.transactionRequest.chainId),client:e.client,data:o.transactionRequest.data,to:o.transactionRequest.to,value:BigInt(o.transactionRequest.value),gas:BigInt(o.transactionRequest.gasLimit)},approval:o.approval?(0,eV.d)({contract:(0,R.getContract)({client:e.client,address:o.approval.tokenAddress,chain:(0,eo.XY)(o.approval.chainId)}),spender:o.approval.spenderAddress,amountWei:BigInt(o.approval.amountWei)}):void 0,fromAddress:o.fromAddress,toAddress:o.toAddress,paymentToken:o.paymentToken,processingFee:o.processingFee,estimatedGasCostUSDCents:o.estimatedGasCostUSDCents,client:e.client}}catch(e){throw console.error("Error getting buy with crypto transfer",e),e}}var eQ=n(46188),eY=n(71551),eJ=n(26554),eX=n(21363),eZ=n(91389),e$=n(48273);function e0(e){let{title:t,onBack:n,receiverAddress:r,client:a,payer:c,onDone:d,chain:u,token:h,tokenAmount:m,transactionMode:y,setTransactionHash:p}=e,[f,v]=(0,s.useState)("transfer"),[j,g]=(0,s.useState)({id:"idle"}),{symbol:C}=(0,_.U)(u);return(0,o.jsxs)(S.Container,{p:"lg",children:[(0,o.jsx)(S.ModalHeader,{title:t,onBack:n}),(0,o.jsx)(k.L,{y:"xl"}),y&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eb.E,{steps:2,currentStep:"transfer"===f?1:2}),(0,o.jsx)(k.L,{y:"sm"}),(0,o.jsx)(L.Text,{size:"sm",children:"transfer"===f?"Step 1 of 2 - Transfer funds":"Step 2 of 2 - Finalize transaction"}),(0,o.jsx)(k.L,{y:"xl"})]}),(0,o.jsxs)(S.Container,{flex:"row",center:"y",style:{justifyContent:"space-between"},children:[(0,o.jsx)(L.Text,{size:"sm",children:"From"}),(0,o.jsx)(em,{address:c.account.address,client:a})]}),(0,o.jsx)(k.L,{y:"md"}),(0,o.jsx)(S.Line,{}),(0,o.jsx)(k.L,{y:"md"}),(0,o.jsxs)(S.Container,{flex:"row",center:"y",style:{justifyContent:"space-between"},children:[(0,o.jsx)(L.Text,{size:"sm",children:"To"}),(0,o.jsx)(em,{address:r,client:a})]}),(0,o.jsx)(k.L,{y:"md"}),(0,o.jsx)(S.Line,{}),(0,o.jsx)(k.L,{y:"md"}),(0,o.jsx)(eZ.Q,{chainId:u.id,client:a,label:"Amount",tokenAmount:m,tokenSymbol:(0,F.M)(h)?C||"":h.symbol,tokenAddress:(0,F.M)(h)?l.K8:h.address}),(0,o.jsx)(k.L,{y:"lg"}),y&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(k.L,{y:"sm"}),(0,o.jsxs)(S.Container,{gap:"sm",flex:"row",style:{justifyContent:"space-between"},center:"y",color:"accentText",children:[(0,o.jsx)(eX.h,{isDone:"execute"===f,isActive:"transfer"===f,label:"transfer"===f?"Transfer":"Done"}),(0,o.jsx)(e$.s6,{}),(0,o.jsx)(eX.h,{isDone:!1,label:"Finalize",isActive:"execute"===f})]}),(0,o.jsx)(k.L,{y:"lg"})]}),"error"===j.id&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(S.Container,{flex:"row",gap:"xs",center:"both",color:"danger",children:(0,o.jsx)(L.Text,{color:"danger",size:"sm",style:{textAlign:"center"},children:"transfer"===f?"".concat(j.error||"Failed to Transfer"):"Failed to Execute"})}),(0,o.jsx)(k.L,{y:"md"})]}),!y&&"execute"===f&&"done"===j.id&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(S.Container,{flex:"row",gap:"xs",center:"both",color:"success",children:[(0,o.jsx)(i.NhS,{width:x.EA.sm,height:x.EA.sm}),(0,o.jsx)(L.Text,{color:"success",size:"sm",children:"Payment completed"})]}),(0,o.jsx)(k.L,{y:"md"})]}),c.chain.id!==u.id?(0,o.jsx)(A.v,{fullWidth:!0,variant:"accent",switchChain:async()=>{await e.payer.wallet.switchChain(u)}}):(0,o.jsxs)(E.Button,{variant:"accent",fullWidth:!0,disabled:"pending"===j.id,onClick:async()=>{if("execute"===f){d();return}try{if(g({id:"pending"}),y){let t=(0,F.M)(h)?(0,eJ.prepareTransaction)({client:a,chain:u,to:r,value:(0,D.r0)(m)}):(0,eK.r)({contract:(0,R.getContract)({address:h.address,chain:u,client:a}),to:r,amount:m});await (0,eQ.B)({account:e.payer.account,transaction:t}),v("execute"),g({id:"idle"})}else{let t=await eG({client:a,fromAddress:c.account.address,toAddress:r,chainId:u.id,tokenAddress:(0,F.M)(h)?l.K8:h.address,amount:m,purchaseData:void 0});t.approval&&(v("approve"),await (0,eQ.B)({account:e.payer.account,transaction:t.approval})),v("transfer");let n=t.transactionRequest,o=await (0,eY.sendTransaction)({account:e.payer.account,transaction:n});p(o.transactionHash),g({id:"idle"})}}catch(e){var t;console.error(e),g({id:"error",error:"error"in e?null===(t=e.error)||void 0===t?void 0:t.message:null==e?void 0:e.message})}},gap:"xs",children:["execute"===f&&("done"===j.id?"Done":"Continue"),"transfer"===f&&("pending"===j.id?"Confirming":"Confirm"),"approve"===f&&("pending"===j.id?"Approving":"Approve"),"pending"===j.id&&(0,o.jsx)(T.Spinner,{size:"sm",color:"accentButtonText"})]})]})}function e1(e){let[t,n]=(0,s.useState)();return t?(0,o.jsx)(eU.v,{title:e.title,onBack:e.onBack,onTryAgain:e.onTryAgain,swapTxHash:t,client:e.client,onDone:e.onDone,transactionMode:!1,isEmbed:e.isEmbed,quote:void 0,onSuccess:e.onSuccess}):(0,o.jsx)(e0,{...e,setTransactionHash:n})}function e2(e){var t;let n=(0,N.useCustomTheme)(),r=(0,ex.f)(),s=!e.showAllWallets&&(null===(t=e.wallets)||void 0===t?void 0:t.every(e=>r.includes(e)));return(0,o.jsxs)(S.Container,{children:[(0,o.jsxs)(S.Container,{flex:"column",gap:"xs",children:[r.filter(t=>{var n;return!(null===(n=e.hiddenWallets)||void 0===n?void 0:n.includes(t.id))}).map(t=>{var n;let i=null===(n=t.getAccount())||void 0===n?void 0:n.address;return(0,o.jsx)(eh,{walletId:t.id,client:e.client,address:i||"",onClick:()=>{e.onSelect(t),e.onBack()},disableChevron:!0,checked:!1},t.id)}),!s&&(0,o.jsx)(E.Button,{variant:"secondary",fullWidth:!0,onClick:e.onConnect,gap:"xs",bg:"tertiaryBg",style:{borderRadius:x.q0.lg,border:"1px solid ".concat(n.colors.borderColor),padding:x.W0.sm},children:(0,o.jsxs)(S.Container,{flex:"row",gap:"sm",center:"y",expand:!0,children:[(0,o.jsx)(i.pOD,{width:x.EA.md,height:x.EA.md}),(0,o.jsx)(L.Text,{size:"sm",color:"primaryText",children:"Add Another Wallet"})]})})]}),(0,o.jsx)(k.L,{y:"sm"})]})}var e3=n(80383);function e5(e){let t=e.payOptions.buyWithCrypto?e.payOptions.buyWithCrypto.testMode:void 0,n=(0,e3.oU)(e.client,t);return n.data?(0,o.jsx)(e6,{...e,supportedDestinations:n.data}):(0,o.jsx)(C.a,{})}function e6(e){var t,n,i,a,c,d,u,x,h,m,y,p,f,v,C,w,b,k,T,A,E,L,W,B,I,z,R,q;let{client:D,supportedDestinations:N,connectLocale:_,payOptions:H}=e,U=(0,j.M)(),{payer:K,setPayer:V}=function(){let e=(0,P.r)(),t=(0,j.M)(),n=(0,ez.v)(),[o,i]=(0,s.useState)();return(0,s.useEffect)(()=>{let e=null==o?void 0:o.wallet;function t(){if(!e){i(void 0);return}let t=e.getAccount(),n=e.getChain();t&&n?i({account:t,chain:n,wallet:e}):i(void 0)}if(e){let n=e.subscribe("chainChanged",t),o=e.subscribe("accountChanged",t);return()=>{n(),o()}}},[o]),{payer:o||(t&&n&&e?{account:t,chain:n,wallet:e}:void 0),setPayer:i}}(),[G,Q]=(0,s.useState)({id:"main"}),{tokenAmount:Y,setTokenAmount:J,toChain:X,setToChain:Z,deferredTokenAmount:$,toToken:ee,setToToken:et}=function(e){var t,n,o,i;let{payOptions:r,supportedDestinations:a}=e,l=null==r?void 0:r.prefillBuy,c=(0,ez.v)(),d=(null==l?void 0:l.amount)||"",[u,x]=(0,s.useState)(d),h=(0,eM.c)(u,300),[m,y]=(0,s.useState)((null==l?void 0:l.chain)||"transaction"===r.mode&&(null===(t=r.transaction)||void 0===t?void 0:t.chain)||"direct_payment"===r.mode&&(null===(n=r.paymentInfo)||void 0===n?void 0:n.chain)||(null===(o=a.find(e=>e.chain.id===(null==c?void 0:c.id)))||void 0===o?void 0:o.chain)||(null===(i=a[0])||void 0===i?void 0:i.chain)||eI),[p,f]=(0,s.useState)((null==l?void 0:l.token)||"direct_payment"===r.mode&&r.paymentInfo.token||F.L);return{toChain:m,setToChain:y,toToken:p,setToToken:f,tokenAmount:u,setTokenAmount:x,deferredTokenAmount:h}}({payOptions:H,supportedDestinations:N}),[en,eo]=(0,s.useState)(!1),ei=(0,s.useCallback)(()=>{Q({id:"main"}),e.onDone()},[e.onDone]),er=(0,e3.QR)({client:e.client,destinationChainId:X.id,destinationTokenAddress:(0,F.M)(ee)?l.K8:ee.address}),es=(0,s.useMemo)(()=>tn(N,H,e.supportedTokens),[e.supportedTokens,N,H]),ea=(0,s.useMemo)(()=>{if(er.data)return tn(er.data,H,e.supportedTokens)},[e.supportedTokens,er.data,H]),{fromChain:el,setFromChain:ec,fromToken:ed,setFromToken:eu}=function(e){var t,n,o,i,r,a;let{payOptions:l,supportedSources:c}=e,d=(null==c?void 0:c.length)?c[0]:void 0,[u,x]=(0,s.useState)(),h=!1!==l.buyWithCrypto&&(null===(n=l.buyWithCrypto)||void 0===n?void 0:null===(t=n.prefillSource)||void 0===t?void 0:t.chain)||"transaction"===l.mode&&(null===(o=l.transaction)||void 0===o?void 0:o.chain)||"direct_payment"===l.mode&&(null===(i=l.paymentInfo)||void 0===i?void 0:i.chain),m=(null==d?void 0:d.chain)?d.chain:void 0,y=u||h||m||eI,[p,f]=(0,s.useState)(),v=!1!==l.buyWithCrypto&&(null===(a=l.buyWithCrypto)||void 0===a?void 0:null===(r=a.prefillSource)||void 0===r?void 0:r.token)||"direct_payment"===l.mode&&l.paymentInfo.token,j=F.L;return{fromChain:y,setFromChain:x,fromToken:p||v||j||F.L,setFromToken:f}}({payOptions:H,supportedSources:er.data||[]}),{selectedCurrency:ex,setSelectedCurrency:eh}=function(e){var t,n;let{payOptions:o}=e,i=(!1!==o.buyWithFiat?null===(n=o.buyWithFiat)||void 0===n?void 0:null===(t=n.prefillSource)||void 0===t?void 0:t.currency:void 0)||function(){try{let e=Intl.DateTimeFormat().resolvedOptions().timeZone.toLowerCase();if(e.includes("london"))return"GBP";if(e.includes("europe"))return"EUR";if(e.includes("japan"))return"JPY";if(e.includes("canada"))return"CAD";return"USD"}catch(e){return"USD"}}(),[r,a]=(0,s.useState)(ey.QT.find(e=>e.shorthand===i)||ey.kE);return{selectedCurrency:r,setSelectedCurrency:a}}({payOptions:H}),em=function(e){let{payOptions:t,supportedDestinations:n,toChain:o,toToken:i}=e,{fiat:r,swap:s}=function(){let e=n.find(e=>e.chain.id===o.id);if(!e)return{fiat:!1,swap:!1};let t=(0,F.M)(i)?l.K8:i.address,r=e.tokens.find(e=>e.address.toLowerCase()===t.toLowerCase());return r?{fiat:r.buyWithFiatEnabled,swap:r.buyWithCryptoEnabled}:{fiat:!0,swap:!0}}(),a=!1!==t.buyWithFiat&&r,c=!1!==t.buyWithCrypto&&s;return{buyWithFiatEnabled:a,buyWithCryptoEnabled:c,showPaymentSelection:a&&c}}({payOptions:e.payOptions,supportedDestinations:e.supportedDestinations,toChain:X,toToken:ee}),ef=!1===em.showPaymentSelection&&!1===em.buyWithCryptoEnabled&&!1===em.buyWithFiatEnabled,ev=(0,r.useQueryClient)(),ej=(0,s.useCallback)(t=>{var n,o;null===(n=(o=e.payOptions).onPurchaseSuccess)||void 0===n||n.call(o,{type:"crypto",status:t}),(0,g.K)(ev)},[e.payOptions.onPurchaseSuccess,ev]),eg=(0,s.useCallback)(t=>{var n,o;null===(n=(o=e.payOptions).onPurchaseSuccess)||void 0===n||n.call(o,{type:"fiat",status:t}),(0,g.K)(ev)},[e.payOptions.onPurchaseSuccess,ev]);if("connect-payer-wallet"===G.id)return(0,o.jsx)(O.A,{accountAbstraction:null===(h=e.connectOptions)||void 0===h?void 0:h.accountAbstraction,appMetadata:null===(m=e.connectOptions)||void 0===m?void 0:m.appMetadata,chain:null===(y=e.connectOptions)||void 0===y?void 0:y.chain,chains:null===(p=e.connectOptions)||void 0===p?void 0:p.chains,client:e.client,connectLocale:e.connectLocale,isEmbed:e.isEmbed,onBack:()=>Q(G.backScreen),onSelect:e=>{let t=e.getAccount(),n=e.getChain();e&&t&&n&&V({account:t,chain:n,wallet:e})},hiddenWallets:e.hiddenWallets,recommendedWallets:null===(f=e.connectOptions)||void 0===f?void 0:f.recommendedWallets,showAllWallets:(null===(v=e.connectOptions)||void 0===v?void 0:v.showAllWallets)===void 0||(null===(C=e.connectOptions)||void 0===C?void 0:C.showAllWallets),walletConnect:null===(w=e.connectOptions)||void 0===w?void 0:w.walletConnect,wallets:null===(k=e.connectOptions)||void 0===k?void 0:null===(b=k.wallets)||void 0===b?void 0:b.filter(e=>"inApp"!==e.id)});if("swap-flow"===G.id&&K)return(0,o.jsx)(eH.$,{title:e.title,transactionMode:"transaction"===H.mode,isEmbed:e.isEmbed,client:D,onBack:()=>{Q({id:"buy-with-crypto"})},buyWithCryptoQuote:G.quote,payer:K,isFiatFlow:!1,onDone:ei,onTryAgain:()=>{Q({id:"buy-with-crypto"})},onSuccess:ej});if("fiat-flow"===G.id&&K)return(0,o.jsx)(eB,{title:e.title,transactionMode:"transaction"===H.mode,quote:G.quote,onBack:()=>{Q({id:"buy-with-fiat"})},client:D,testMode:!1!==e.payOptions.buyWithFiat&&(null===(T=e.payOptions.buyWithFiat)||void 0===T?void 0:T.testMode)===!0,theme:"string"==typeof e.theme?e.theme:e.theme.type,openedWindow:G.openedWindow,onDone:ei,isEmbed:e.isEmbed,payer:K,onSuccess:eg});if("transfer-flow"===G.id&&K&&U){let t=(null===(E=e.payOptions)||void 0===E?void 0:null===(A=E.paymentInfo)||void 0===A?void 0:A.sellerAddress)||U.address;return(0,o.jsx)(e1,{title:e.title,onBack:()=>Q({id:"buy-with-crypto"}),payer:K,client:e.client,chain:X,token:ee,tokenAmount:Y,receiverAddress:t,transactionMode:"transaction"===e.payOptions.mode,isEmbed:e.isEmbed,onDone:ei,onTryAgain:()=>{Q({id:"buy-with-crypto"})},onSuccess:ej})}if("select-currency"===G.id){let e=()=>Q(G.backScreen);return(0,o.jsx)(ep,{onSelect:t=>{e(),eh(t)},onBack:e})}if("select-to-token"===G.id){let t=N.map(e=>e.chain),n=()=>Q(G.backScreen),i=null==H?void 0:null===(L=H.prefillBuy)||void 0===L?void 0:L.allowEdits;return(null==i?void 0:i.token)===!1?(0,o.jsx)(to,{chains:t,client:e.client,connectLocale:e.connectLocale,setChain:Z,goBack:n}):(0,o.jsx)(M.k,{onBack:n,tokenList:(((null==X?void 0:X.id)?es[X.id]:void 0)||[]).filter(e=>e.address!==l.K8),onTokenSelect:e=>{et(e),n()},chain:X,chainSelection:(null==i?void 0:i.chain)!==!1?{chains:t,select:e=>{Z(e)}}:void 0,connectLocale:_,client:D,modalTitle:e.title})}if("select-from-token"===G.id&&er.data&&ea){let t=er.data.map(e=>e.chain),n=()=>Q(G.backScreen);return!1!==H.buyWithCrypto&&(null===(I=H.buyWithCrypto)||void 0===I?void 0:null===(B=I.prefillSource)||void 0===B?void 0:null===(W=B.allowEdits)||void 0===W?void 0:W.token)===!1?(0,o.jsx)(to,{chains:t,client:e.client,connectLocale:e.connectLocale,setChain:ec,goBack:n}):(0,o.jsx)(M.k,{onBack:n,tokenList:(((null==el?void 0:el.id)?ea[el.id]:void 0)||[]).filter(e=>e.address!==l.K8),onTokenSelect:e=>{eu(e),n()},chain:el,chainSelection:!1!==H.buyWithCrypto&&(null===(q=H.buyWithCrypto)||void 0===q?void 0:null===(R=q.prefillSource)||void 0===R?void 0:null===(z=R.allowEdits)||void 0===z?void 0:z.chain)!==!1?{chains:er.data.map(e=>e.chain),select:e=>ec(e)}:void 0,connectLocale:_,client:D,modalTitle:"Pay with"})}return(0,o.jsx)(S.Container,{animate:"fadein",children:(0,o.jsxs)("div",{children:["main"===G.id&&(0,o.jsx)(e7,{title:e.title,payerAccount:null==K?void 0:K.account,client:D,onSelectBuyToken:()=>Q({id:"select-to-token",backScreen:G}),payOptions:H,setTokenAmount:J,setToChain:Z,setToToken:et,setFromChain:ec,setFromToken:eu,toChain:X,toToken:ee,tokenAmount:Y,connectOptions:e.connectOptions,setScreen:Q,supportedDestinations:N,onBack:e.onBack,theme:e.theme,hasEditedAmount:en,setHasEditedAmount:eo,enabledPaymentMethods:em}),("select-payment-method"===G.id||"select-wallet"===G.id||"buy-with-crypto"===G.id||"buy-with-fiat"===G.id)&&K&&(0,o.jsxs)(e8,{title:e.title,selectedChain:X,selectedToken:ee,tokenAmount:Y,client:D,onBack:()=>{em.showPaymentSelection&&("select-wallet"===G.id||"buy-with-fiat"===G.id)?Q({id:"select-payment-method"}):"buy-with-crypto"===G.id?Q({id:"select-wallet"}):Q({id:"main"})},children:["select-payment-method"===G.id&&(0,o.jsx)(e9,{mode:H.mode,client:D,walletAddress:K.account.address,walletType:K.wallet.id,setScreen:e=>Q({id:e})}),"select-wallet"===G.id&&(0,o.jsx)(e2,{client:D,hiddenWallets:e.hiddenWallets,onSelect:e=>{let t=e.getChain(),n=e.getAccount();t&&n&&(V({account:n,chain:t,wallet:e}),Q({id:"buy-with-crypto"}))},showAllWallets:!!(null===(t=e.connectOptions)||void 0===t?void 0:t.showAllWallets),wallets:null===(n=e.connectOptions)||void 0===n?void 0:n.wallets,onBack:()=>{},onConnect:()=>{Q({id:"connect-payer-wallet",backScreen:{id:"select-wallet"}})},selectedAddress:K.account.address}),"buy-with-crypto"===G.id&&U&&(0,o.jsx)(te,{setScreen:Q,tokenAmount:$,toChain:X,toToken:ee,fromChain:el,fromToken:ed,showFromTokenSelector:()=>{Q({id:"select-from-token",backScreen:G})},payer:K,client:D,isEmbed:e.isEmbed,onDone:ei,payOptions:H,connectLocale:_,connectOptions:e.connectOptions,setPayer:V,activeAccount:U,setTokenAmount:J,setHasEditedAmount:eo,disableTokenSelection:!0===ef||!1!==H.buyWithCrypto&&(null===(c=H.buyWithCrypto)||void 0===c?void 0:null===(a=c.prefillSource)||void 0===a?void 0:null===(i=a.allowEdits)||void 0===i?void 0:i.chain)===!1&&(null===(x=H.buyWithCrypto)||void 0===x?void 0:null===(u=x.prefillSource)||void 0===u?void 0:null===(d=u.allowEdits)||void 0===d?void 0:d.token)===!1}),"buy-with-fiat"===G.id&&(0,o.jsx)(tt,{setScreen:Q,tokenAmount:$,toChain:X,toToken:ee,selectedCurrency:ex,client:D,isEmbed:e.isEmbed,onDone:ei,payOptions:H,theme:e.theme,showCurrencySelector:()=>{Q({id:"select-currency",backScreen:G})},payer:K,setTokenAmount:J,setHasEditedAmount:eo})]})]})})}function e4(e){return(0,o.jsx)("div",{children:(0,o.jsxs)(S.Container,{flex:"row",gap:"sm",center:"y",style:{justifyContent:"space-between"},children:[(0,o.jsxs)(S.Container,{flex:"row",gap:"xs",center:"y",children:[(0,o.jsx)(L.Text,{color:"primaryText","data-testid":"tokenAmount",size:"xl",children:(0,u.u)(Number(e.tokenAmount),6)}),(0,o.jsxs)(S.Container,{flex:"row",gap:"xxs",center:"y",children:[(0,o.jsx)(W.TokenSymbol,{token:e.selectedToken,chain:e.selectedChain,size:"md",color:"secondaryText"}),(0,o.jsx)($.K,{chain:e.selectedChain,client:e.client,size:"sm",token:e.selectedToken})]})]}),(0,o.jsx)(w.G,{chain:e.selectedChain,client:e.client,size:"sm",short:!0})]})})}function e7(e){let{setTokenAmount:t,setToChain:n,setToToken:i,setFromChain:r,setFromToken:s,payerAccount:a,client:l,tokenAmount:c,payOptions:d,toToken:u,toChain:x,supportedDestinations:h,enabledPaymentMethods:m}=e,{showPaymentSelection:y,buyWithCryptoEnabled:p,buyWithFiatEnabled:f}=m,v=!c;switch(d.mode){case"transaction":return(0,o.jsx)(eu,{supportedDestinations:h,payUiOptions:d,payerAccount:a,connectOptions:e.connectOptions,client:l,onContinue:(o,a,l)=>{t(o),n(a),r(a),s(l),i(l),y?e.setScreen({id:"select-payment-method"}):p?e.setScreen({id:"select-wallet"}):f?e.setScreen({id:"buy-with-fiat"}):e.setScreen({id:"select-wallet"})}});case"direct_payment":return(0,o.jsx)(Q,{client:l,payUiOptions:d,payerAccount:a,connectOptions:e.connectOptions,supportedDestinations:h,onContinue:(o,a,l)=>{t(o),n(a),r(a),s(l),i(l),y?e.setScreen({id:"select-payment-method"}):p?e.setScreen({id:"buy-with-crypto"}):f?e.setScreen({id:"buy-with-fiat"}):e.setScreen({id:"select-wallet"})}});default:var j,g,C,w,b,T;return(0,o.jsxs)(S.Container,{p:"lg",children:[(0,o.jsx)(S.ModalHeader,{title:e.title,onBack:e.onBack}),(0,o.jsx)(k.L,{y:"xl"}),(0,o.jsx)(eF,{value:c,onChange:async n=>{e.setHasEditedAmount(!0),t(n)},freezeAmount:(null===(g=d.prefillBuy)||void 0===g?void 0:null===(j=g.allowEdits)||void 0===j?void 0:j.amount)===!1,freezeChainAndToken:(null===(w=d.prefillBuy)||void 0===w?void 0:null===(C=w.allowEdits)||void 0===C?void 0:C.chain)===!1&&(null===(T=d.prefillBuy)||void 0===T?void 0:null===(b=T.allowEdits)||void 0===b?void 0:b.token)===!1,token:u,chain:x,onSelectToken:e.onSelectBuyToken,client:e.client}),(0,o.jsx)(k.L,{y:"xl"}),(0,o.jsx)(S.Container,{flex:"column",gap:"sm",children:a?(0,o.jsx)(E.Button,{variant:"accent",fullWidth:!0,disabled:v,"data-disabled":v,onClick:()=>{y?e.setScreen({id:"select-payment-method"}):p?e.setScreen({id:"buy-with-crypto"}):f?e.setScreen({id:"buy-with-fiat"}):console.error("No payment method enabled")},children:"Continue"}):(0,o.jsx)("div",{children:(0,o.jsx)(B.ConnectButton,{...e.connectOptions,client:e.client,theme:e.theme,connectButton:{style:{width:"100%"}}})})})]})}}function e8(e){return(0,o.jsxs)(S.Container,{children:[(0,o.jsx)(S.Container,{p:"lg",children:(0,o.jsx)(S.ModalHeader,{title:e.title,onBack:e.onBack})}),(0,o.jsxs)(S.Container,{px:"lg",style:{paddingBottom:x.W0.lg},children:[(0,o.jsx)(k.L,{y:"xs"}),(0,o.jsx)(e4,{selectedToken:e.selectedToken,selectedChain:e.selectedChain,tokenAmount:e.tokenAmount,client:e.client}),(0,o.jsx)(k.L,{y:"md"}),(0,o.jsx)(S.Line,{}),(0,o.jsx)(k.L,{y:"lg"}),(0,o.jsx)(L.Text,{size:"sm",children:" Pay with "}),(0,o.jsx)(k.L,{y:"sm"}),e.children]})]})}function e9(e){return(0,o.jsx)(S.Container,{animate:"fadein",children:(0,o.jsxs)(S.Container,{flex:"column",gap:"sm",children:[(0,o.jsxs)(E.Button,{variant:"outline",bg:"tertiaryBg",onClick:()=>{(0,a.V)({event:"pay_with_credit_card_".concat(e.mode||"unknown","_mode"),client:e.client,walletAddress:e.walletAddress,walletType:e.walletType}),e.setScreen("buy-with-fiat")},gap:"sm",style:{justifyContent:"flex-start",textAlign:"left"},children:[(0,o.jsx)(S.Container,{color:"secondaryText",flex:"row",center:"both",children:(0,o.jsx)(i.Xwj,{style:{width:x.EA.md,height:x.EA.md}})}),(0,o.jsxs)(S.Container,{flex:"column",gap:"xxs",children:[(0,o.jsx)(L.Text,{size:"md",color:"primaryText",children:"Credit Card"}),(0,o.jsx)(L.Text,{size:"xs",children:"Securely pay with credit card"})]})]}),(0,o.jsxs)(E.Button,{variant:"outline",bg:"tertiaryBg",onClick:()=>{(0,a.V)({event:"pay_with_crypto_".concat(e.mode||"unknown","_mode"),client:e.client,walletAddress:e.walletAddress,walletType:e.walletType}),e.setScreen("select-wallet")},style:{justifyContent:"flex-start"},gap:"sm",children:[(0,o.jsx)(S.Container,{color:"secondaryText",flex:"row",center:"both",children:(0,o.jsx)(z.O,{size:x.EA.md})}),(0,o.jsxs)(S.Container,{flex:"column",gap:"xxs",children:[(0,o.jsx)(L.Text,{size:"md",color:"primaryText",children:"Crypto"}),(0,o.jsx)(L.Text,{size:"xs",children:"Pay with your connected wallet"})]})]})]})})}function te(e){var t,n,i,r,a,c;let{setScreen:d,payer:x,client:p,toChain:f,tokenAmount:v,toToken:j,fromChain:g,fromToken:C,showFromTokenSelector:w,payOptions:B,disableTokenSelection:I}=e,z=(null===(n=e.payOptions)||void 0===n?void 0:null===(t=n.paymentInfo)||void 0===t?void 0:t.sellerAddress)||e.activeAccount.address,{drawerRef:M,drawerOverlayRef:O,isOpen:R,setIsOpen:q}=(0,b.useDrawer)(),[D,N]=(0,s.useState)("fees"),_=(0,h.t)({address:x.account.address,chain:g,tokenAddress:(0,F.M)(C)?void 0:C.address,client:p}),P=(0,F.M)(C)?l.K8:C.address.toLowerCase(),H=(0,F.M)(j)?l.K8:j.address.toLowerCase(),U=!!v&&!(g.id===f.id&&P===H),K=(c=U?{fromAddress:x.account.address,toAddress:z,fromChainId:g.id,fromTokenAddress:(0,F.M)(C)?l.K8:C.address,toChainId:f.id,toTokenAddress:(0,F.M)(j)?l.K8:j.address,toAmount:v,client:p,purchaseData:B.purchaseData}:void 0,(0,m.useQuery)({staleTime:3e4,refetchInterval:3e4,gcTime:3e4,queryKey:["buyWithCryptoQuote",c],queryFn:()=>{if(!c)throw Error("Swap params are required");return(0,y.D)(c)},enabled:!!c,retry(e,t){if(e>3)return!1;try{let e=t.error;if("MINIMUM_PURCHASE_AMOUNT"===e.code||404===e.statusCode||e.statusCode>=500)return!1}catch(e){}return!0}})),V=U?null===(i=K.data)||void 0===i?void 0:i.swapDetails.fromAmount:v,G=!!V&&!!_.data&&Number(_.data.displayValue)<Number(V),Q=U&&!K.data||G,Y=e.payer.chain.id!==g.id,J=!K.isLoading&&K.error?function(e){try{if("MINIMUM_PURCHASE_AMOUNT"===e.error.code){let t=e.error.data.minimumAmountEth;return{minAmount:(0,u.u)(Number(t),6)}}}catch(e){}return{msg:["Unable to get price quote"]}}(K.error):void 0;return(0,o.jsxs)(S.Container,{flex:"column",gap:"md",animate:"fadein",children:[R&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(b.DrawerOverlay,{ref:O}),(0,o.jsx)(b.Drawer,{ref:M,close:()=>q(!1),children:"fees"===D&&K.data&&(0,o.jsxs)("div",{children:[(0,o.jsx)(L.Text,{size:"lg",color:"primaryText",children:"Fees"}),(0,o.jsx)(k.L,{y:"lg"}),(0,o.jsx)(eq,{quote:K.data})]})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(eh,{client:e.client,onClick:()=>{d({id:"select-wallet"})},address:e.payer.account.address,walletId:e.payer.wallet.id,containerStyle:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}),(0,o.jsx)(eP,{value:V||"",onSelectToken:w,chain:g,token:C,isLoading:K.isLoading&&!V,client:p,freezeChainAndTokenSelection:I,payerAccount:e.payer.account,swapRequired:U}),U&&(0,o.jsx)(X,{quoteIsLoading:K.isLoading,estimatedSeconds:null===(r=K.data)||void 0===r?void 0:r.swapDetails.estimated.durationSeconds,onViewFees:function(){K.data&&(q(!0),N("fees"))}}),(0,o.jsx)(k.L,{y:"md"})]}),J&&(0,o.jsxs)("div",{children:[J.minAmount&&(0,o.jsxs)(L.Text,{color:"danger",size:"sm",center:!0,multiline:!0,children:["Minimum amount is ",J.minAmount," ",(0,o.jsx)(W.TokenSymbol,{token:j,chain:f,size:"sm",inline:!0,color:"danger"})]}),null===(a=J.msg)||void 0===a?void 0:a.map(e=>(0,o.jsx)(L.Text,{color:"danger",size:"sm",center:!0,multiline:!0,children:e},e))]}),!J&&G&&(0,o.jsxs)("div",{children:[(0,o.jsx)(L.Text,{color:"danger",size:"sm",center:!0,multiline:!0,children:"Not enough funds."}),(0,o.jsx)(L.Text,{color:"danger",size:"sm",center:!0,multiline:!0,children:"Try a different wallet or token."})]}),(null==J?void 0:J.minAmount)?(0,o.jsx)(E.Button,{variant:"accent",fullWidth:!0,onClick:()=>{e.setTokenAmount(String(J.minAmount)),e.setHasEditedAmount(!0)},children:"Set Minimum"}):!Y||K.isLoading||G||K.error?(0,o.jsx)(E.Button,{variant:Q?"outline":"accent",fullWidth:!0,"data-disabled":Q,disabled:Q,onClick:async()=>{Q||function(){if("direct_payment"!==e.payOptions.mode&&"fund_wallet"!==e.payOptions.mode||G||U){if("transaction"===e.payOptions.mode&&!G&&!U){x.account.address!==z?d({id:"transfer-flow"}):e.onDone();return}}else d({id:"transfer-flow"});K.data&&d({id:"swap-flow",quote:K.data})}()},gap:"xs",children:K.isLoading?(0,o.jsxs)(o.Fragment,{children:["Getting price quote",(0,o.jsx)(T.Spinner,{size:"sm",color:"accentText"})]}):"Continue"}):(0,o.jsx)(A.v,{variant:"accent",fullWidth:!0,switchChain:async()=>{await e.payer.wallet.switchChain(g)}})]})}function tt(e){var t,n,i,r,a,c;let{toToken:x,tokenAmount:h,payer:y,client:p,setScreen:f,toChain:j,showCurrencySelector:g,selectedCurrency:C}=e,w=(null===(n=e.payOptions)||void 0===n?void 0:null===(t=n.paymentInfo)||void 0===t?void 0:t.sellerAddress)||e.payer.account.address,{drawerRef:A,drawerOverlayRef:B,isOpen:I,setIsOpen:z}=(0,b.useDrawer)(),[M,O]=(0,s.useState)("fees"),R=e.payOptions.buyWithFiat,q=(c=!1!==R&&h?{fromCurrencySymbol:C.shorthand,toChainId:j.id,toAddress:w,toTokenAddress:(0,F.M)(x)?l.K8:x.address,toAmount:h,client:p,isTestMode:null==R?void 0:R.testMode,purchaseData:e.payOptions.purchaseData,fromAddress:y.account.address,preferredProvider:null==R?void 0:R.preferredProvider}:void 0,(0,m.useQuery)({queryKey:["useBuyWithFiatQuote",c],queryFn:async()=>{if(!c)throw Error("No params provided");return v(c)},enabled:!!c,retry(e,t){if(e>3)return!1;try{let e=t.error;if("MINIMUM_PURCHASE_AMOUNT"===e.code||404===e.statusCode||e.statusCode>=500)return!1}catch(e){}return!0}})),D=!q.data,N=!q.isLoading&&q.error?function(e){try{if("MINIMUM_PURCHASE_AMOUNT"===e.error.code){let t=e.error.data.minimumAmountEth;return{minAmount:(0,u.u)(Number(t),6)}}}catch(e){}return{msg:["Unable to get price quote"]}}(q.error):void 0;return(0,o.jsxs)(S.Container,{flex:"column",gap:"md",animate:"fadein",children:[I&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(b.DrawerOverlay,{ref:B}),(0,o.jsx)(b.Drawer,{ref:A,close:()=>z(!1),children:"fees"===M&&q.data&&(0,o.jsxs)("div",{children:[(0,o.jsx)(L.Text,{size:"lg",color:"primaryText",children:"Fees"}),(0,o.jsx)(k.L,{y:"lg"}),(0,o.jsx)(eD,{quote:q.data})]})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(et,{isLoading:q.isLoading,value:null===(i=q.data)||void 0===i?void 0:i.fromCurrencyWithFees.amount,client:p,currency:C,onSelectCurrency:g}),(0,o.jsx)(X,{quoteIsLoading:q.isLoading,estimatedSeconds:null===(r=q.data)||void 0===r?void 0:r.estimatedDurationSeconds,onViewFees:function(){q.data&&(O("fees"),z(!0))}}),(0,o.jsx)(k.L,{y:"md"})]}),N&&(0,o.jsxs)("div",{children:[N.minAmount&&(0,o.jsxs)(L.Text,{color:"danger",size:"sm",center:!0,multiline:!0,children:["Minimum amount is ",N.minAmount," ",(0,o.jsx)(W.TokenSymbol,{token:x,chain:j,size:"sm",inline:!0,color:"danger"})]}),null===(a=N.msg)||void 0===a?void 0:a.map(e=>(0,o.jsx)(L.Text,{color:"danger",size:"sm",center:!0,multiline:!0,children:e},e))]}),(null==N?void 0:N.minAmount)?(0,o.jsx)(E.Button,{variant:"accent",fullWidth:!0,onClick:()=>{e.setTokenAmount(String(N.minAmount)),e.setHasEditedAmount(!0)},children:"Set Minimum"}):(0,o.jsx)(E.Button,{variant:D?"outline":"accent","data-disabled":D,disabled:D,fullWidth:!0,onClick:function(){if(!q.data)return;let t=d(q.data),n=null;t||(n=ej(q.data.onRampLink,"string"==typeof e.theme?e.theme:e.theme.type),(0,eg.h)({type:"fiat",intentId:q.data.intentId})),f({id:"fiat-flow",quote:q.data,openedWindow:n})},gap:"xs",children:q.isLoading?(0,o.jsxs)(o.Fragment,{children:["Getting price quote",(0,o.jsx)(T.Spinner,{size:"sm",color:"accentText"})]}):"Continue"})]})}function tn(e,t,n){let o={},i=!1===t.buyWithFiat,r=!1===t.buyWithCrypto;for(let t of e)o[t.chain.id]=t.tokens.filter(e=>!!e.buyWithCryptoEnabled&&!!e.buyWithFiatEnabled||(!!e.buyWithCryptoEnabled||!i)&&(!!e.buyWithFiatEnabled||!r));if(n)for(let e in n){let t=Number(e),i=n[t];i&&(o[t]=i)}return o}function to(e){return(0,o.jsx)(I.NetworkSelectorContent,{client:e.client,connectLocale:e.connectLocale,showTabs:!1,onBack:e.goBack,chains:e.chains,closeModal:e.goBack,networkSelector:{renderChain:t=>(0,o.jsx)(I.ChainButton,{chain:t.chain,confirming:!1,switchingFailed:!1,onClick:()=>{e.setChain(t.chain),e.goBack()},client:e.client,connectLocale:e.connectLocale})}})}},94071:function(e,t,n){n.r(t),n.d(t,{Drawer:function(){return f},DrawerContainer:function(){return v},DrawerOverlay:function(){return g},drawerOpenAnimation:function(){return j},useDrawer:function(){return C}});var o=n(56093),i=n(3827),r=n(57158),s=n(62177),a=n(64090),l=n(4966),c=n(72568),d=n(96635),u=n(58852),x=n(94234),h=n(4654),m=n(31137),y=n(3702);function p(){let e=(0,o._)(["\n  from {\n    opacity: 0;\n    transform: translateY(100px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n"]);return p=function(){return e},e}let f=(0,a.forwardRef)(function(e,t){return(0,i.jsx)(v,{ref:t,children:(0,i.jsx)(x.H,{children:(0,i.jsxs)(m.Container,{p:"lg",children:[(0,i.jsx)(h.CrossContainer,{children:(0,i.jsx)(y.IconButton,{type:"button","aria-label":"Close",onClick:e.close,children:(0,i.jsx)(s.Pxu,{width:c.EA.md,height:c.EA.md,style:{color:"inherit"}})})}),e.children]})})})}),v=(0,u.lx)(e=>{let t=(0,l.useCustomTheme)();return{zIndex:1e4,borderTopLeftRadius:c.q0.xl,borderTopRightRadius:c.q0.xl,background:t.colors.modalBg,position:"absolute",bottom:0,left:0,right:0,animation:"".concat(j," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.1)"),borderTop:"1px solid ".concat(t.colors.borderColor)}}),j=(0,r.F4)(p()),g=(0,u.lx)(e=>({backgroundColor:(0,l.useCustomTheme)().colors.modalOverlayBg,zIndex:9999,position:"absolute",inset:0,animation:"".concat(d.BX," 400ms cubic-bezier(0.16, 1, 0.3, 1)")}));function C(){let[e,t]=(0,a.useState)(!1),n=(0,a.useRef)(null),o=(0,a.useRef)(null),i=(0,a.useCallback)(()=>new Promise(e=>{if(n.current){var t;let i={easing:"cubic-bezier(0.175, 0.885, 0.32, 1.1)",fill:"forwards",duration:300},r=n.current.animate([{transform:"translateY(100%)",opacity:0}],i);null===(t=o.current)||void 0===t||t.animate([{opacity:0}],i),r.onfinish=()=>e()}else e()}),[]),r=(0,a.useCallback)(async e=>{e?t(!0):(await i(),t(!1))},[i]);return(0,a.useLayoutEffect)(()=>{if(!e)return;let t=e=>{n.current&&e.target instanceof Node&&!n.current.contains(e.target)&&r(!1)};return requestAnimationFrame(()=>{document.addEventListener("click",t)}),()=>{document.removeEventListener("click",t)}},[e,r]),{drawerRef:n,drawerOverlayRef:o,setIsOpen:r,isOpen:e}}}}]);