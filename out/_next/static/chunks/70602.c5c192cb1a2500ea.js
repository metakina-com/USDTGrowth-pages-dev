"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70602],{70602:function(e,n,t){t.d(n,{autoConnectWC:function(){return X},connectWC:function(){return A}});var o=t(89995),r=t(51273),a=t(92791);let i=e=>e;class s extends r.G{constructor({body:e,error:n,url:t}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:["URL: ".concat(i(t)),"Request body: ".concat((0,a.P)(e))],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code}}class c extends r.G{constructor(e,{code:n,docsPath:t,metaMessages:o,name:r,shortMessage:a}){super(a,{cause:e,docsPath:t,metaMessages:o||(null==e?void 0:e.metaMessages),name:r||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=r||e.name,this.code=e instanceof s?e.code:null!=n?n:-1}}class l extends c{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class d extends c{constructor(e){super(e,{code:d.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(d,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class u extends c{constructor(e){super(e,{code:u.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(u,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class p extends c{constructor(e,{method:n}={}){super(e,{code:p.code,name:"MethodNotFoundRpcError",shortMessage:"The method".concat(n?' "'.concat(n,'"'):""," does not exist / is not available.")})}}Object.defineProperty(p,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class h extends c{constructor(e){super(e,{code:h.code,name:"InvalidParamsRpcError",shortMessage:"Invalid parameters were provided to the RPC method.\nDouble check you have provided the correct parameters."})}}Object.defineProperty(h,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class v extends c{constructor(e){super(e,{code:v.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(v,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class m extends c{constructor(e){super(e,{code:m.code,name:"InvalidInputRpcError",shortMessage:"Missing or invalid parameters.\nDouble check you have provided the correct parameters."})}}Object.defineProperty(m,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class b extends c{constructor(e){super(e,{code:b.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(b,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class f extends c{constructor(e){super(e,{code:f.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(f,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class g extends c{constructor(e){super(e,{code:g.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(g,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class w extends c{constructor(e,{method:n}={}){super(e,{code:w.code,name:"MethodNotSupportedRpcError",shortMessage:"Method".concat(n?' "'.concat(n,'"'):""," is not implemented.")})}}Object.defineProperty(w,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class C extends c{constructor(e){super(e,{code:C.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(C,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class y extends c{constructor(e){super(e,{code:y.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(y,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class M extends l{constructor(e){super(e,{code:M.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(M,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class P extends l{constructor(e){super(e,{code:P.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(P,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class E extends l{constructor(e,{method:n}={}){super(e,{code:E.code,name:"UnsupportedProviderMethodError",shortMessage:"The Provider does not support the requested method".concat(n?' " '.concat(n,'"'):"",".")})}}Object.defineProperty(E,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class O extends l{constructor(e){super(e,{code:O.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(O,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class R extends l{constructor(e){super(e,{code:R.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(R,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class j extends l{constructor(e){super(e,{code:j.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(j,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});var x=t(85738),I=t(83286),q=t(14520),N=t(24053),T=t(15168),U=t(68652),_=t(23416),S=t(14649),J=t(86359),D=t(30792),L=t(81027);let k="wallet_addEthereumChain",Y={requestedChains:"tw.wc.requestedChains",lastUsedChainId:"tw.wc.lastUsedChainId"};async function A(e,n,t,o,r){let a=await G(e,t,r),i=e.walletConnect,{onDisplayUri:s}=i||{};if(!s&&r&&"walletConnect"!==t){let e=await (0,_.d)(t);s=n=>{let t=e.mobile.native||e.mobile.universal;if(!t)throw Error("No app url found for wallet connect to redirect to.");r((0,U.P)(t,n).redirect)}}s&&a.events.addListener("display_uri",s);let c=null==i?void 0:i.optionalChains,l=e.chain;"global.safe"===t&&(c=W.map(x.XY),l&&!c.includes(l)&&(l=void 0));let{rpcMap:d,chainsToRequest:u}=K({client:e.client,chain:l,optionalChains:c});a.session&&await a.connect({...(null==i?void 0:i.pairingTopic)?{pairingTopic:null==i?void 0:i.pairingTopic}:{},optionalChains:u,chains:l?[l.id]:u.length>0?[u[0]]:[1],rpcMap:d}),z(u,o);let p=(await a.enable())[0];if(!p)throw Error("No accounts found on provider.");let h=(0,D.J)(a.chainId),v=e.chain&&e.chain.id===h?e.chain:(0,x.XY)(h);if(e){var m,b;let n={optionalChains:null===(m=e.walletConnect)||void 0===m?void 0:m.optionalChains,chain:e.chain,pairingTopic:null===(b=e.walletConnect)||void 0===b?void 0:b.pairingTopic};o&&(0,T.j$)(o,t,n)}return(null==i?void 0:i.onDisplayUri)&&a.events.removeListener("display_uri",i.onDisplayUri),Q(p,v,a,n,o)}async function X(e,n,t,o,r){let a=o?await (0,T.Zx)(o,t):null,i=await G(a?{chain:a.chain,client:e.client,walletConnect:{pairingTopic:a.pairingTopic,optionalChains:a.optionalChains}}:{client:e.client,walletConnect:{}},t,r,!0),s=i.accounts[0];if(!s)throw Error("No accounts found on provider.");let c=(0,D.J)(i.chainId);return Q(s,e.chain&&e.chain.id===c?e.chain:(0,x.XY)(c),i,n,o)}async function G(e,n,o){var r,a,i,s;let c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=await (0,_.d)(n),d=e.walletConnect,{EthereumProvider:u,OPTIONAL_EVENTS:p,OPTIONAL_METHODS:h}=await Promise.all([t.e(41384),t.e(62663),t.e(50748),t.e(9e3)]).then(t.bind(t,11455)),v=null==d?void 0:d.optionalChains,m=e.chain;"global.safe"===n&&(v=W.map(x.XY),m&&!v.includes(m)&&(m=void 0));let{rpcMap:b,chainsToRequest:f}=K({client:e.client,chain:m,optionalChains:v}),g=await u.init({showQrModal:(null==d?void 0:d.showQrModal)===void 0?!o:d.showQrModal,projectId:(null==d?void 0:d.projectId)||L.O,optionalMethods:h,optionalEvents:p,optionalChains:f,chains:m?[m.id]:f.length>0?[f[0]]:[1],metadata:{name:(null==d?void 0:null===(r=d.appMetadata)||void 0===r?void 0:r.name)||(0,J.f)().name,description:(null==d?void 0:null===(a=d.appMetadata)||void 0===a?void 0:a.description)||(0,J.f)().description,url:(null==d?void 0:null===(i=d.appMetadata)||void 0===i?void 0:i.url)||(0,J.f)().url,icons:[(null==d?void 0:null===(s=d.appMetadata)||void 0===s?void 0:s.logoUrl)||(0,J.f)().logoUrl]},rpcMap:b,qrModalOptions:null==d?void 0:d.qrModalOptions,disableProviderPing:!0});if(g.events.setMaxListeners(Number.POSITIVE_INFINITY),!c&&g.session&&await g.disconnect(),"walletConnect"!==n){function w(){var e,n,t,r;let a=(null===(r=g.session)||void 0===r?void 0:null===(t=r.peer)||void 0===t?void 0:null===(n=t.metadata)||void 0===n?void 0:null===(e=n.redirect)||void 0===e?void 0:e.native)||l.mobile.native||l.mobile.universal;o&&a&&o(a)}g.signer.client.on("session_request_sent",w),g.events.addListener("disconnect",()=>{g.signer.client.off("session_request_sent",w)})}return g}function F(e,n){return{address:(0,I.Kn)(n),async sendTransaction(n){return{transactionHash:await e.request({method:"eth_sendTransaction",params:[{gas:n.gas?(0,q.eC)(n.gas):void 0,value:n.value?(0,q.eC)(n.value):void 0,from:this.address,to:n.to,data:n.data}]})}},async signMessage(n){let{message:t}=n,o="string"==typeof t?(0,q.$G)(t):t.raw instanceof Uint8Array?(0,q.dg)(t.raw):t.raw;return e.request({method:"personal_sign",params:[o,this.address]})},async signTypedData(n){let t=(0,N.t)(n),{domain:r,message:a,primaryType:i}=t,s={EIP712Domain:(0,o.cj)({domain:r}),...t.types};(0,o.iC)({domain:r,message:a,primaryType:i,types:s});let c=(0,o.H6)({domain:null!=r?r:{},message:a,primaryType:i,types:s});return await e.request({method:"eth_signTypedData_v4",params:[this.address,c]})}}}function Q(e,n,t,o,r){let a=F(t,e);async function i(){t.removeListener("accountsChanged",c),t.removeListener("chainChanged",l),t.removeListener("disconnect",s),await t.disconnect()}function s(){z([],r),null==r||r.removeItem(Y.lastUsedChainId),i(),o.emit("disconnect",void 0)}function c(e){if(e[0]){let n=F(t,(0,I.Kn)(e[0]));o.emit("accountChanged",n),o.emit("accountsChanged",e)}else s()}function l(e){let n=(0,x.XY)((0,D.J)(e));o.emit("chainChanged",n),null==r||r.setItem(Y.lastUsedChainId,String(e))}return t.on("accountsChanged",c),t.on("chainChanged",l),t.on("disconnect",s),t.on("session_delete",s),[a,n,i,e=>V(t,e,r)]}async function V(e,n,t){let o=n.id;try{var r,a,i,s;let c=function(e){var n,t,o;let r=null===(o=e.session)||void 0===o?void 0:null===(t=o.namespaces[L.A])||void 0===t?void 0:null===(n=t.chains)||void 0===n?void 0:n.map(e=>Number.parseInt(e.split(":")[1]||""));return null!=r?r:[]}(e),l=(null===(a=e.session)||void 0===a?void 0:null===(r=a.namespaces[L.A])||void 0===r?void 0:r.methods)||[];if(!c.includes(o)&&l.includes(k)){let r=await (0,x.ZN)(n),a=[...new Set([...(null===(i=n.blockExplorers)||void 0===i?void 0:i.map(e=>e.url))||[],...(null===(s=r.explorers)||void 0===s?void 0:s.map(e=>e.url))||[]])];await e.request({method:k,params:[{chainId:(0,q.eC)(r.chainId),chainName:r.name,nativeCurrency:r.nativeCurrency,rpcUrls:(0,S.w)(r),blockExplorerUrls:a.length>0?a:void 0}]});let c=await H(t);c.push(o),z(c,t)}await e.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,q.eC)(o)}]})}catch(n){let e="string"==typeof n?n:null==n?void 0:n.message;if(/user rejected request/i.test(e))throw new M(n);throw new j(n)}}function z(e,n){null==n||n.setItem(Y.requestedChains,JSON.stringify(e))}async function H(e){let n=await e.getItem(Y.requestedChains);return n?JSON.parse(n):[]}function K(e){let n={};e.chain&&(n[e.chain.id]=(0,x.GO)({chain:e.chain,client:e.client}));let t=((null==e?void 0:e.optionalChains)||[]).slice(0,10);for(let o of t)n[o.id]=(0,x.GO)({chain:o,client:e.client});let o=t.map(e=>e.id)||[],r=e.chain?[e.chain.id,...o]:o.length>0?o:[1];return e.chain||0!==t.length||(n[1]=(0,x.XY)(1).rpc),{rpcMap:n,chainsToRequest:r}}let W=[1,11155111,42161,43114,8453,1313161554,84532,56,42220,100,10,137,1101,324,534352]}}]);